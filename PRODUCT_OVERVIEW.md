# Pangaea Kaigi - AI会議システム

## プロダクトビジョン

複数のAIエージェントによる高速で緻密な議論を通じて、企業の意思決定者が論理的で多角的な意思決定を行えるよう支援するシステム。

## 解決する課題

### ターゲットユーザー
- 経営戦略や社内の重要な決め事を検討している企業の意思決定者
- 一人で悩み、「これで決めていいのか？」と不安を感じている人
- 本当に緻密に考えられているのか確信が持てない人

### 提供する価値

1. **高速で緻密な多角的議論**
   - 複数のAIエージェントが異なる観点から意見を出し合う
   - 短時間で質の高い議論が可能

2. **論理的な意思決定プロセス**
   - 感情や権威に流されない、純粋に論理的な議論
   - すべての意見が公平に評価される

3. **意思決定の記録と継承**
   - どのような根拠で意思決定を行ったかがデータとして保存される
   - 後任者への引き継ぎが容易になる
   - 部下への説明が明確にできる

## システム概要

### MVP（最小実行可能プロダクト）の仕様

#### 1. 議題の入力
ユーザーが解決したい課題・意思決定したい内容を入力

#### 2. ファシリテーターによるアジェンダ作成
- **役割**: ファシリテーターAgent
- **機能**:
  - 入力された議題を複数の小議題に分割
  - 議論の順序を決定（アジェンダの作成）
  - 最終的な結論に至るための論理的な議論の流れを設計

例：
```
元の議題: 新規事業の方向性について
↓
アジェンダ:
1. 市場環境の分析
2. 自社の強みの確認
3. 事業候補の列挙
4. 各候補の評価
5. 最終的な事業選択
```

#### 3. 参加Agentの自動生成
- **役割**: ファシリテーターAgent
- **機能**:
  - 議題に適した観点を持つAgent 4〜6人を自動生成
  - 各Agentに特定の観点・専門性を付与
  - 例：財務の専門家、マーケティング専門家、技術責任者、顧客視点の代弁者など

#### 4. 議論プロセス（各アジェンダごとに実施）

##### フェーズ1: 独立した意見出し
- 各Agentが他者の意見に影響されず、自分の意見を表明
- これにより会議の「緻密さ」を実現
- すべてのAgentが意見を出し終えるまで他者の意見は非公開

##### フェーズ2: 投票による意見の絞り込み
- 各Agentが「論理的に最も良い」と思う意見を1つ選んで投票
- 0票の意見は削除
- 1票以上の意見のみ次のフェーズへ

##### フェーズ3: 少数派からの説得プロセス
1. 最も票が少ない意見の支持者が、その意見の論理的優位性を説明
2. 他のAgentがその説明に対して合意できるか判断
3. 全員が合意 → その意見に決定
4. 合意できない人がいる → 次に少数派の意見の説得へ
5. 全員が一致する意見が出るまで繰り返し

##### ファシリテーターの介入
- 議論が平行線を辿る場合
- より深い考察を促す鋭い問いかけを投げかける
- 議論の質を高め、合意形成をサポート

#### 5. 最終的なアウトプット
- 各アジェンダに対する合意された結論
- 元の議題に対する最終的な答え
- すべての参加Agentが合意した論理的な意思決定

## システムの特徴

### 緻密性の確保
- 独立した意見出しにより、同調圧力を排除
- 多様な観点からの意見を確実に収集

### 論理性の追求
- 感情や権威ではなく、論理的妥当性で意見を評価
- 説得プロセスを通じて最も論理的な結論を導出

### 民主的プロセス
- すべての意見が平等に扱われる
- 少数派の意見も必ず聴取される
- 全員の合意を目指す

### 透明性と記録
- すべての議論プロセスが記録される
- 意思決定の根拠が明確
- 後から振り返りや検証が可能

## 技術スタック

### フロントエンド
- Next.js 16
- React
- TypeScript
- Tailwind CSS
- リアルタイムチャットUI（LINE風）

### バックエンド
- Python 3.11+
- FastAPI
- OpenAI Responses API（GPT-4.1-mini）
- WebSocket（リアルタイム通信）

### 今後の拡張予定
- データベース（議論履歴の保存）
- 認証システム
- Agent設定のカスタマイズ機能

## MVP技術仕様詳細

### LLM設計

#### 使用モデル
- **OpenAI GPT-4.1-mini**を全Agentで使用
- **Responses API**を使用（2025年に導入された新しいAPI）
- 各Agentは独立したconversation state（異なる`previous_response_id`）

#### Responses APIの特徴
OpenAIの新しいResponses APIは、サーバー側で会話の状態を管理する機能を持つ：

- **`store: true`パラメータ**: OpenAIのサーバー側に会話を保存
- **`previous_response_id`**: 過去のresponse IDを指定して会話を継続
- 従来のChat Completions APIと異なり、毎回全会話履歴を送る必要がない
- IDを渡すだけで会話のコンテキストが維持される

#### コンテキスト管理の設計思想
人間の思考プロセスを再現するため、以下のように設計：

1. **自分の意見（内部思考）**
   - 各Agentは自分専用の`previous_response_id`チェーンを持つ
   - `store: true`でOpenAIサーバー側に会話履歴を保存
   - 自分が過去に考えたことは記憶として残る
   - これが「自分の脳で考えたこと」を再現

2. **他者の意見（外部情報）**
   - プロンプトとして明示的に共有
   - 他者の意見は「外から入ってくる情報」として扱う
   - 自分の思考チェーン（response_id）とは別のコンテキストとして管理

#### 実装例
```python
# Agent Aの最初の発言
response_a1 = client.responses.create(
    model="gpt-4.1-mini",
    input="この議題についてあなたの意見を述べてください",
    store=True
)

# Agent Aの2回目の発言（他者の意見を受けて）
response_a2 = client.responses.create(
    model="gpt-4.1-mini",
    input=f"以下の意見について反論してください: {他者の意見}",
    previous_response_id=response_a1.id,
    store=True
)
```

この設計により、各Agentが：
- 自分の一貫した思考を持ちながら
- 他者の意見を新しい情報として受け取り
- それに対して反応する

という、人間らしい議論を実現

### Agent生成

#### MVP仕様
- **完全自動生成**
  - ファシリテーターが議題を分析し、4〜6人のAgentを自動生成
  - ユーザーによる調整機能はMVP後に実装予定

### 議論の進行

#### 自動進行
- すべてのフェーズは自動で進行
- ユーザーの「次へ」ボタンなどの介入は不要
- ユーザーはリアルタイムで議論を観察

#### 意見の表現形式
- **端的で明確な文章形式**
- 各意見は以下の構造を推奨：
  ```
  結論: [簡潔な主張]
  根拠: [論理的な理由]
  ```
- 長すぎない、要点を押さえた発言

### 説得プロセス

#### 双方向の議論
- 説得者がプレゼンテーション
- **他のAgentは反論可能**
- 説得者も反論を聞いて考えを変えることがある
- これにより、多数派の意見に少数派が納得する流れも再現

#### 反論の流れ
1. 少数派Agentが説得を試みる
2. 他のAgentが反論・質問
3. 説得者が応答
4. 再度、各Agentが合意/不合意を表明
5. 説得者自身も、他の意見に納得すれば意見を変更可能

### 合意判定

#### 明示的な表明
- 各Agentが**Yes/No**を明示的に表明
- ファシリテーターは進行役のみで、判定には関与しない
- 全Agentが「Yes」で合意成立

### UI/UX設計

#### チャット形式のリアルタイム表示
- **LINE風のチャットUI**
- 議論がリアルタイムで流れるように表示
- 各Agent発言ごとに吹き出しを表示
- ユーザーは会議の様子をライブで観察

#### 表示内容
- すべてのAgentの発言を表示
- 要約は行わず、議論の全体像を見せる
- フェーズ遷移も明示的に表示

### データ保存

#### MVP段階
- **データベースは使用しない**
- 議論の質に集中するため、シンプルな構成
- セッション中のみデータを保持

#### Phase 2以降
- 議論履歴の永続化
- 検索・分析機能の追加

### 議論の終了条件

#### MVP仕様
- **全員が合意するまで継続**
- 最大ターン数や時間制限は設けない
- まずは質の高い合意形成プロセスが機能するかを検証

#### 将来的な拡張
- 運用結果を見て、必要であれば終了条件を追加
- 例：最大ターン数、時間制限、ユーザーによる強制終了など

## 開発フェーズ

### Phase 1: MVP開発
- [ ] ファシリテーターAgentの実装
- [ ] アジェンダ自動生成機能
- [ ] 参加Agent自動生成機能
- [ ] 議論プロセスの実装
  - [ ] 独立意見出し
  - [ ] 投票機能
  - [ ] 説得プロセス
- [ ] 基本的なUI/UX

### Phase 2: 機能拡張
- [ ] 議論履歴の保存・検索
- [ ] ユーザーアカウント管理
- [ ] 議論の中断・再開機能
- [ ] より高度なファシリテーション機能

### Phase 3: エンタープライズ機能
- [ ] 組織管理機能
- [ ] 権限管理
- [ ] 議論テンプレート
- [ ] 分析・レポート機能
- [ ] 意思決定のトレーサビリティ

## 期待される効果

1. **意思決定の質の向上**
   - より多角的な視点
   - より論理的な結論

2. **意思決定の速度向上**
   - AIによる高速な議論
   - 日程調整不要

3. **組織知の蓄積**
   - 意思決定プロセスの記録
   - ナレッジの継承

4. **説明責任の向上**
   - 透明性のある意思決定プロセス
   - 根拠の明確化
